# Production Configuration for LLM Config Manager
# This file contains production-ready configuration settings.
# Copy and customize for your production environment.

# Server Configuration
server:
  host: "0.0.0.0"
  port: 8080
  workers: 4  # Number of worker threads (adjust based on CPU cores)
  max_connections: 1000
  timeout_seconds: 30
  enable_tls: true
  tls_cert_path: "/etc/llm-config/certs/server.crt"
  tls_key_path: "/etc/llm-config/certs/server.key"

# Storage Configuration
storage:
  type: "file"  # Options: file, s3, database
  path: "/var/lib/llm-config/data"
  backup_enabled: true
  backup_path: "/var/lib/llm-config/backups"
  backup_retention_days: 30
  max_file_size_mb: 100

# Encryption Configuration
encryption:
  algorithm: "aes-256-gcm"
  key_rotation_enabled: true
  key_rotation_days: 90
  # Key should be loaded from environment variable or secrets manager
  # key_path: "/etc/llm-config/secrets/master.key"

# Cache Configuration
cache:
  l1:
    enabled: true
    max_size: 1000  # Number of entries
    ttl_seconds: 300  # 5 minutes
  l2:
    enabled: true
    path: "/var/lib/llm-config/cache"
    max_size_mb: 500
    ttl_seconds: 3600  # 1 hour

# Audit Logging
audit:
  enabled: true
  log_path: "/var/log/llm-config/audit"
  retention_days: 365  # 1 year for compliance
  format: "json"  # Options: json, text
  log_level: "info"  # Options: debug, info, warn, error
  include_read_operations: false  # Set true for full audit trail
  sensitive_fields_redacted: true

# RBAC Configuration
rbac:
  enabled: true
  default_role: "viewer"  # Default role for new users
  allow_self_service: false  # Users cannot modify their own roles
  require_mfa_for_admin: true  # Require MFA for admin operations
  session_timeout_minutes: 60

# Rate Limiting
rate_limit:
  enabled: true
  requests_per_minute: 1000
  burst_size: 100
  per_user_limit: true

# Monitoring & Metrics
monitoring:
  enabled: true
  metrics_port: 9090
  metrics_path: "/metrics"
  health_check_path: "/health"
  profiling_enabled: false  # Enable only for debugging

# Logging
logging:
  level: "info"  # Options: trace, debug, info, warn, error
  format: "json"  # Options: json, text, pretty
  output: "file"  # Options: stdout, file, syslog
  file_path: "/var/log/llm-config/application.log"
  rotation:
    enabled: true
    max_size_mb: 100
    max_backups: 10
    compress: true

# Database (if using database storage)
database:
  type: "postgresql"  # Options: postgresql, mysql
  host: "localhost"
  port: 5432
  database: "llm_config"
  username: "llm_config_user"
  # password should be loaded from environment variable
  # password: "${DB_PASSWORD}"
  max_connections: 20
  connection_timeout_seconds: 5
  ssl_mode: "require"  # Options: disable, require, verify-ca, verify-full

# API Configuration
api:
  enable_cors: false  # Enable only if needed for browser clients
  cors_origins: []
  api_key_required: true
  jwt_enabled: true
  jwt_secret_path: "/etc/llm-config/secrets/jwt.secret"
  jwt_expiration_hours: 24

# Feature Flags
features:
  template_engine: true
  version_control: true
  config_export: true
  config_import: true
  bulk_operations: false  # Disable for security in production
  graphql_api: false

# Security
security:
  allowed_namespaces: []  # Empty = all allowed; specify to restrict
  forbidden_keys: ["password", "secret", "token", "api_key"]  # Prevent accidental plain-text secrets
  max_config_size_kb: 1024  # Maximum size of a single configuration
  require_https: true
  hsts_enabled: true
  csp_enabled: true

# Environment
environment: "production"

# Notifications (optional)
notifications:
  enabled: false
  email:
    smtp_host: "smtp.example.com"
    smtp_port: 587
    from_address: "llm-config@example.com"
    admin_recipients: ["admin@example.com"]
  slack:
    webhook_url: ""
  events:
    - "config_deleted"
    - "secret_accessed"
    - "permission_denied"
